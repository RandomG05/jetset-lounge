/**
 * Filename: billing.reportSalesByShift.js
 * Generated 2019-12-18 at 09:47:32 PM
 */
Ext.define('ExtApp.modules.billing.model.model_dataShift',{extend:'Ext.data.Model',alias:'model_dataShift',fields:[{name:'id',type:'int'},{name:'nama_shift',type:'string'},{name:'jam_shift_start',type:'string'},{name:'jam_shift_end',type:'string'},{name:'created',type:'string'},{name:'createdby',type:'string'},{name:'updated',type:'string'},{name:'updatedby',type:'string'}],proxy:{type:'ajax',url:appUrl+'billing/dataShift/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.systems.model.model_UserData',{extend:'Ext.data.Model',alias:'model_UserData',fields:[{name:'id',type:'int'},{name:'user_username',type:'string'},{name:'user_pin',type:'string'},{name:'client_id',type:'int'},{name:'client_name',type:'string'},{name:'client_structure_id',type:'int'},{name:'client_structure_name',type:'string'},{name:'role_id',type:'int'},{name:'role_name',type:'string'},{name:'user_fullname',type:'string'},{name:'user_firstname',type:'string'},{name:'user_lastname',type:'string'},{name:'user_email',type:'string'},{name:'user_phone',type:'string'},{name:'user_mobile',type:'string'},{name:'user_address',type:'string'},{name:'avatar',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'},{name:'window_mode',type:'string'}],proxy:{type:'ajax',url:appUrl+'systems/UserData/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.billing.store.store_dataShift',{extend:'Ext.data.Store',model:'ExtApp.modules.billing.model.model_dataShift',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.billing.store.store_sortReport',{extend:'Ext.data.Store',fields:['val','name'],data:[{"val":"payment_date","name":"Payment Date"},{"val":"billing_no","name":"Billing No"}],autoLoad:false});Ext.define('ExtApp.modules.systems.store.store_UserData',{extend:'Ext.data.Store',model:'ExtApp.modules.systems.model.model_UserData',autoLoad:false,remoteSort:true});Ext.define("ExtApp.modules.billing.view.reportSalesByShift",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var v_this=this;var helperGrid=theApp.getHelper('Grid');var phpJs=theApp.getHelper('phpJs');var store_ComboboxSortReport_reportSalesByShift=theApp.getStore('store_ComboboxSortReport_reportSalesByShift',false);if(store_ComboboxSortReport_reportSalesByShift==false){store_ComboboxSortReport_reportSalesByShift=theApp.copyStore('billing','store_sortReport','store_ComboboxSortReport_reportSalesByShift');}
var store_ComboboxKasir=theApp.getStore('store_UserData',false);if(store_ComboboxKasir==false){store_ComboboxKasir=theApp.copyStore('systems','store_UserData','store_ComboboxKasir');}
store_ComboboxKasir.proxy.extraParams.role_id=opt_role_id_kasir;store_ComboboxKasir.proxy.extraParams.limit=999999;store_ComboboxKasir.proxy.extraParams.show_all_text=1;store_ComboboxKasir.proxy.extraParams.show_choose_text=0;store_ComboboxKasir.proxy.extraParams.is_dropdown=1;store_ComboboxKasir.proxy.extraParams.keywords='';me.store_dataShift_reportSalesByShift=theApp.getStore('store_dataShift_reportSalesByShift',false);if(me.store_dataShift_reportSalesByShift==false){me.store_dataShift_reportSalesByShift=theApp.copyStore('billing','store_dataShift','store_dataShift_reportSalesByShift');}
me.store_dataShift_reportSalesByShift.proxy.extraParams.limit=9999999;me.store_dataShift_reportSalesByShift.proxy.extraParams.show_all_text=1;me.store_dataShift_reportSalesByShift.proxy.extraParams.show_choose_text=0;me.store_dataShift_reportSalesByShift.proxy.extraParams.is_dropdown=1;me.store_dataShift_reportSalesByShift.proxy.extraParams.product_type='';me.store_dataShift_reportSalesByShift.proxy.extraParams.keywords='';var add_parameter='_dc='+phpJs.mktime();add_parameter+='&date_from='+phpJs.date("d-m-Y");add_parameter+='&shift_billing=0';add_parameter+='&sorting=';var url_report=appUrl+'billing/reportSales/print_reportSalesByShift?'+add_parameter;return desktop.createWindow({id:me.id,title:'Sales Report by Shift',width:900,height:600,iconCls:'icon-grid',animCollapse:false,constrainHeader:true,border:0,layout:{type:'fit'},items:[{xtype:"panel",layout:'fit',width:850,height:500,border:false,items:[{xtype:"component",id:'print_area_reportSalesByShift',autoEl:{tag:"iframe",src:url_report},border:false}],dockedItems:[{xtype:'toolbar',dock:'top',items:[{xtype:'datefield',fieldLabel:'Date',name:'date_from',id:'src_dateFrom_reportSalesByShift',labelSeparator:'',format:'d-m-Y',altFormats:'Y-m-d|d-m-Y|dmY|Ymd',margin:'5 10 0 0',labelWidth:45,width:170,value:phpJs.date('d-m-Y'),allowBlank:false},'-',{xtype:'combobox',name:'sortReport',id:'srcSortReport_reportSalesByShift',fieldLabel:'Sort',emptyText:'Payment Date',width:170,labelWidth:40,store:store_ComboboxSortReport_reportSalesByShift,displayField:'name',valueField:'val',queryMode:'local',allowBlank:false},'-',{xtype:'combobox',name:'shift_billing',id:'src_shift_billing_reportSalesByShift',fieldLabel:'Shift',labelSeparator:'',labelWidth:40,width:200,emptyText:'Semua Shift',store:me.store_dataShift_reportSalesByShift,queryMode:'local',hiddenName:"id",displayField:'nama_shift',valueField:'id',typeAhead:true,minChars:1,forceSelection:true,pageSize:0},'-',{xtype:'button',text:'Search',scale:'medium',margin:'15 10 0 0',itemId:'btnSearch_reportSalesByShift',tooltip:'Search',iconCls:'btn-search',handler:function(){me.print_reportSalesByShift(0);}},{xtype:'button',text:'Print',scale:'medium',margin:'15 0 0 0',itemId:'btnPrint_reportSalesByShift',tooltip:'Print',iconCls:'btn-print',handler:function(){me.print_reportSalesByShift(1);}},'-',{xtype:'button',text:'Excel',scale:'medium',margin:'15 0 0 0',itemId:'btnExcel_reportSalesByShift',tooltip:'Export to Excel',iconCls:'btn-excel',handler:function(){me.print_reportSalesByShift(2);}}]},{xtype:'toolbar',dock:'bottom',items:['->',{text:'CLOSE',textAlign:'center',iconCls:'btn-cancel',listeners:{click:function(){me.doClose(me.id);}}}]}]}],listeners:{boxready:function(){Ext.getCmp('srcSortReport_reportSalesByShift').setValue('payment_date');me.store_dataShift_reportSalesByShift.load();}}});}});